# 今から理解する NoSQL Databases〜 ケーススタディと実践的データモデリング 〜(AWS-44)

日時：2022/05/26  11:45 〜 12:15
資料：[AWS-44_NoSQL-Databases_KMD16-KMD17.pdf](https://contents-s3-bucket.s3.ap-northeast-1.amazonaws.com/documents/aws/202205_AWS_SUMMIT_JAPAN_2022/AWS-44_NoSQL-Databases_KMD16-KMD17.pdf)

<br>

## なぜNoSQL？

- データベースにはパフォーマンス、拡張性、可用性が必要
    - システムの成長に伴う課題の推移
    - 読み込み負荷の上昇、複雑なクエリ、大量のレコードと同時接続
- データベースに求められるものは利用するアプリケーションによって異なる
    - RDMBSだけでは全ての要求へ対応するのは困難
- AWSでは要件に応える幅広いデータベースサービスを用意している

<br>

## どんな時にNoSQL？

ユースケース
- 読み込み負荷の上昇
    - 更新の少ないデータならキャッシュさせれば良い
    - インメモリデータベースを採用
    - Amazon ElasticCache
- ユーザ動詞のつながり機能を追加
    - グラフデータベースを使ってユーザのフォロー関係をシンプルクエリで解決
    - Amazon Neptune
- ユーザ数の増加に伴うレイテンシの増加
    - シンプルなデータ構造ならもっと高速な処理実現が必要
    - Key-Valueの採用
    - Amazon DynamoDB

要件を明確にしておくことが大切
- ゲームなら低レイテンシが必要
- 新規サービスなら早期リリースを考慮（学習コストが低い）
- 金融サービスなら厳密なトランザクションが重要

<br>

## どうやってモデリングする？

データモデリングのステップ
- アプリケーションを理解する
- ER図を作成する
- アクセスパターンを書き出す
- データ特性を把握する

アプリケーションへの理解
- ユーザへ提供する機能を理解する

アクセスパターンを書き出す
- アクセスパターンをそのままテーブルにする
- コストを考えてテーブルを減らす

データの特性を把握する
- カーディナリティ
- サイズ
- リクエストレート、許容レイテンシ

データモデリングのループ
- 要件の変動によってデータモデリングは随時行う
- Tinkering

<br>

## データモダナイゼーション with AWS

データインフラのモダナイゼーション
- データインフラをクラウド化する
- マネージドデータベースを利用する
- なんでもRDBMSではなく、Purpose-build databaseを考える